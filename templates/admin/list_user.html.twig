{% extends 'base.html.twig' %}

{% block title %}
{{parent()}}Manage Notice
{% endblock %}
{% block stylesheets %}
{{parent()}}
<link rel="stylesheet" href="//cdn.datatables.net/1.12.0/css/jquery.dataTables.min.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
<link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css'>
{% endblock %}

{% block body %}

<div class="modal fade" id="viewModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel"></h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div id="viewUser"></div>
            </div>
            <div class="modal-footer"></div>
        </div>
    </div>
</div>

<table id="list-notice" class="table">
    <thead>
        <tr>
            <th>User Id</th>
            <th>Name</th>
            <th>Email</th>
            <th>cellphone</th>
            <th>Created</th>
            <th>Updated</th>
            <th>Action</th>
        </tr>
    </thead>
    <tbody>
        {% for record in users %}


        <tr>
            <td>{{record.id}}</td>
            <td>{{record.firstName}}
                {{record.lastName}}</td>
            <td>{{record.email}}</td>
            <td>{{record.cellphone}}</td>
            <td>{{record.created|date('d-m-Y @ h:i')}}</td>
            <td>{{record.updated|date('d-m-Y @ h:i')}}</td>
           
            <td>
                <a href="javascript:void(0)" class="view-user" title="view" data-toggle="tooltip"
                    userid="{{record.id}}">
                    <i class=" fa fa-eye "></i>
                </a>

                <a href="#" class="edit" title="Edit" data-toggle="tooltip">
                    <i class='bi bi-pencil-fill yellow'></i>
                </a>
            </td>
        </tr>


        </tr>
        {% endfor %}
    </tbody>
</table>{% endblock %}{% block javascripts %}
<script src="//cdn.datatables.net/1.12.0/js/jquery.dataTables.min.js"></script>
<script>
    $(document).ready(function () {
        $('#list-notice').DataTable();
    });

    jQuery('body').on('click', ".view-user", function () {

        var id = jQuery(this).attr('userId');

        $.ajax({
            type: "GET",
            url: "{{ path('web_view_ajax_user') }}",
            data: {
                id
            },
            dataType: 'json',
            success: function (returns) {
                jQuery('#viewUser').html(returns);
                jQuery('#viewModal').modal('show');
            },
            error: function (xhr) { }
        });

    });
</script>{% endblock %}